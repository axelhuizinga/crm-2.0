<?php
/**
 * Generated by Haxe 4.1.1
 * Haxe source file: /opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx
 */

namespace hxbit;

use \hxbit\enumSer\Hxbit_PropTypeDesc;
use \haxe\io\_BytesData\Container;
use \php\Boot;
use \haxe\Exception;
use \haxe\crypto\Crc32;
use \haxe\io\Error;
use \haxe\io\Bytes;

class Schema implements Serializable {
	/**
	 * @var int
	 */
	static public $__clid;

	/**
	 * @var int
	 */
	public $__uid;
	/**
	 * @var \Array_hx
	 */
	public $fieldsNames;
	/**
	 * @var \Array_hx
	 */
	public $fieldsTypes;
	/**
	 * @var bool
	 */
	public $isFinal;

	/**
	 * @return void
	 */
	public function __construct () {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:658: characters 52-79
		$this->__uid = (Serializer::$SEQ << 24) | ++Serializer::$UID;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:35: characters 3-19
		$this->fieldsNames = new \Array_hx();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:36: characters 3-19
		$this->fieldsTypes = new \Array_hx();
	}

	/**
	 * @return int
	 */
	public function getCLID () {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:674: characters 61-74
		return Schema::$__clid;
	}

	/**
	 * @return Schema
	 */
	public function getSerializeSchema () {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:708: characters 7-101
		$schema = new Schema();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 13-46
		$_this = $schema->fieldsNames;
		$_this->arr[$_this->length++] = "isFinal";
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 48-110
		$_this = $schema->fieldsTypes;
		$_this->arr[$_this->length++] = PropTypeDesc::PBool();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 13-46
		$_this = $schema->fieldsNames;
		$_this->arr[$_this->length++] = "fieldsNames";
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 48-110
		$_this = $schema->fieldsTypes;
		$_this->arr[$_this->length++] = PropTypeDesc::PArray(PropTypeDesc::PString());
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 13-46
		$_this = $schema->fieldsNames;
		$_this->arr[$_this->length++] = "fieldsTypes";
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:697: characters 48-110
		$_this = $schema->fieldsTypes;
		$_this->arr[$_this->length++] = PropTypeDesc::PArray(PropTypeDesc::PEnum("hxbit.PropTypeDesc"));
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:710: characters 7-61
		$schema->isFinal = Serializer::isClassFinal(Schema::$__clid);
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Macros.hx:711: characters 7-20
		return $schema;
	}

	/**
	 * @return int
	 */
	public function get_checkSum () {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:40: characters 3-28
		$s = new Serializer();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:41: characters 3-12
		$s->begin();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:42: characters 3-19
		$old = $this->__uid;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:43: characters 3-12
		$this->__uid = 0;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:44: characters 3-22
		$s->addKnownRef($this);
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:45: characters 3-14
		$this->__uid = $old;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:46: characters 3-23
		$bytes = $s->end();
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:47: characters 3-39
		return Crc32::make($bytes);
	}

	/**
	 * @param Serializer $__ctx
	 * 
	 * @return void
	 */
	public function serialize ($__ctx) {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:30: characters 6-32
		$_this = $__ctx->out;
		$_this->b = ($_this->b . chr(($this->isFinal ? 1 : 0)));
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:31: characters 19-58
		$a = $this->fieldsNames;
		if ($a === null) {
			$_this = $__ctx->out;
			$_this->b = ($_this->b . chr(0));
		} else {
			$v = $a->length + 1;
			if (($v >= 0) && ($v < 128)) {
				$_this = $__ctx->out;
				$_this->b = ($_this->b . chr($v));
			} else {
				$_this = $__ctx->out;
				$_this->b = ($_this->b . chr(128));
				$__ctx->out->addInt32($v);
			}
			$_g = 0;
			while ($_g < $a->length) {
				$v = ($a->arr[$_g] ?? null);
				++$_g;
				if ($v === null) {
					$_this = $__ctx->out;
					$_this->b = ($_this->b . chr(0));
				} else {
					$b = strlen($v);
					$b1 = new Bytes($b, new Container($v));
					$v1 = $b1->length + 1;
					if (($v1 >= 0) && ($v1 < 128)) {
						$_this1 = $__ctx->out;
						$_this1->b = ($_this1->b . chr($v1));
					} else {
						$_this2 = $__ctx->out;
						$_this2->b = ($_this2->b . chr(128));
						$__ctx->out->addInt32($v1);
					}
					$_this3 = $__ctx->out;
					$_this3->b = ($_this3->b . $b1->b->s);
				}
			}
		}
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:32: characters 19-61
		$a = $this->fieldsTypes;
		if ($a === null) {
			$_this = $__ctx->out;
			$_this->b = ($_this->b . chr(0));
		} else {
			$v = $a->length + 1;
			if (($v >= 0) && ($v < 128)) {
				$_this = $__ctx->out;
				$_this->b = ($_this->b . chr($v));
			} else {
				$_this = $__ctx->out;
				$_this->b = ($_this->b . chr(128));
				$__ctx->out->addInt32($v);
			}
			$_g = 0;
			while ($_g < $a->length) {
				$v = ($a->arr[$_g] ?? null);
				++$_g;
				Hxbit_PropTypeDesc::doSerialize($__ctx, $v);
			}
		}
	}

	/**
	 * @param Serializer $__ctx
	 * 
	 * @return void
	 */
	public function unserialize ($__ctx) {
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:30: characters 6-32
		$this->isFinal = ord($__ctx->input->b->s[$__ctx->inPos++]) !== 0;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:31: characters 19-58
		$e0 = null;
		$v = ord($__ctx->input->b->s[$__ctx->inPos++]);
		if ($v === 128) {
			$_this = $__ctx->input;
			$pos = $__ctx->inPos;
			$v1 = ord($_this->b->s[$pos]) | (ord($_this->b->s[$pos + 1]) << 8) | (ord($_this->b->s[$pos + 2]) << 16) | (ord($_this->b->s[$pos + 3]) << 24);
			$v = (($v1 & ((int)-2147483648)) !== 0 ? $v1 | ((int)-2147483648) : $v1);
			$__ctx->inPos += 4;
		}
		$len = $v;
		$tmp = null;
		if ($len === 0) {
			$tmp = null;
		} else {
			--$len;
			$a = new \Array_hx();
			$_g = 0;
			$_g1 = $len;
			while ($_g < $_g1) {
				$i = $_g++;
				$v = ord($__ctx->input->b->s[$__ctx->inPos++]);
				if ($v === 128) {
					$_this = $__ctx->input;
					$pos = $__ctx->inPos;
					$v1 = ord($_this->b->s[$pos]) | (ord($_this->b->s[$pos + 1]) << 8) | (ord($_this->b->s[$pos + 2]) << 16) | (ord($_this->b->s[$pos + 3]) << 24);
					$v = (($v1 & ((int)-2147483648)) !== 0 ? $v1 | ((int)-2147483648) : $v1);
					$__ctx->inPos += 4;
				}
				$len = $v;
				if ($len === 0) {
					$e0 = null;
				} else {
					--$len;
					$_this1 = $__ctx->input;
					$pos1 = $__ctx->inPos;
					$s = null;
					if (($pos1 < 0) || ($len < 0) || (($pos1 + $len) > $_this1->length)) {
						throw Exception::thrown(Error::OutsideBounds());
					} else {
						$s = substr($_this1->b->s, $pos1, $len);
					}
					$__ctx->inPos += $len;
					$e0 = $s;
				}
				$a->offsetSet($i, $e0);
			}
			$tmp = $a;
		}
		$this->fieldsNames = $tmp;
		#/opt/src/crm-2.0/server/.haxelib/hxbit/1,5,0/hxbit/Schema.hx:32: characters 19-61
		$e0 = null;
		$v = ord($__ctx->input->b->s[$__ctx->inPos++]);
		if ($v === 128) {
			$_this = $__ctx->input;
			$pos = $__ctx->inPos;
			$v1 = ord($_this->b->s[$pos]) | (ord($_this->b->s[$pos + 1]) << 8) | (ord($_this->b->s[$pos + 2]) << 16) | (ord($_this->b->s[$pos + 3]) << 24);
			$v = (($v1 & ((int)-2147483648)) !== 0 ? $v1 | ((int)-2147483648) : $v1);
			$__ctx->inPos += 4;
		}
		$len = $v;
		$tmp = null;
		if ($len === 0) {
			$tmp = null;
		} else {
			--$len;
			$a = new \Array_hx();
			$_g = 0;
			$_g1 = $len;
			while ($_g < $_g1) {
				$i = $_g++;
				$__e = Hxbit_PropTypeDesc::doUnserialize($__ctx);
				$e0 = $__e;
				$a->offsetSet($i, $e0);
			}
			$tmp = $a;
		}
		$this->fieldsTypes = $tmp;
	}

	/**
	 * @return void
	 */
	public function unserializeInit () {
	}

	/**
	 * @internal
	 * @access private
	 */
	static public function __hx__init ()
	{
		static $called = false;
		if ($called) return;
		$called = true;


		self::$__clid = Serializer::registerClass(Boot::getClass(Schema::class));
	}
}

Boot::registerClass(Schema::class, 'hxbit.Schema');
Boot::registerGetters('hxbit\\Schema', [
	'checkSum' => true
]);
Schema::__hx__init();
